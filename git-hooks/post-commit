#!/bin/sh

echo ""
echo "ğŸ¯ Commit finished successfully!"

# Show last commit details with `git log --stat`
echo "ğŸ“ Last commit details:"
echo "------------------------------------------------------------"
git log --stat -n 1
echo "------------------------------------------------------------"

while true; do
  echo ""
  echo "ğŸš€ Do you want to push this commit to 'main' now? (y/n): "
  read -r push_answer < /dev/tty

  case "$push_answer" in
    [yY])
      echo ""
      echo "ğŸ”¼ Pushing to main..."
      git push origin main
      if [ $? -ne 0 ]; then
        echo "âŒ Push failed!"
        exit 1
      else
        echo "âœ… Push successful!"
        exit 0
      fi
      ;;
    [nN])
      echo "ğŸš« Push skipped by user."
      exit 0
      ;;
    *)
      echo "âš ï¸  Invalid input. Please type 'y' (yes) or 'n' (no)."
      ;;
  esac
done
